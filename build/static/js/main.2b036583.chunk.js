(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{69:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(11),o=n.n(a),r=(n(69),n(14)),i=n(47),j=n(48),u=n(35),d=n(57),l=n(56),O=n(17),b=n(34),h=n(30),p=n(97),f=n(106),g=n(100),m="LOGIN_SUCCESS",x=n(3);function v(){return{username:"",password:""}}var y=Object(p.a)((function(e){return{form:{padding:30}}})),S=function(e){var t=y(),n=Object(c.useState)(v),s=Object(h.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)(null),j=Object(h.a)(i,2),u=j[0],d=j[1],l=Object(O.b)();function p(e){var t=e.target,n=t.value,c=t.name;o(Object(r.a)(Object(r.a)({},a),{},Object(b.a)({},c,n)))}return Object(x.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(t){var n=t.username,c=t.password;fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:c})}).then((function(e){return e.json()})).then((function(t){-1!==t.myId&&(console.log(t.myId),e.closeDialog(),l({type:m,data:{userId:t.myId,myFavs:t.myFavs}}))}))}(a),d(u),o(v)},className:t.form,children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{children:"Email"}),Object(x.jsx)(f.a,{type:"text",id:"username",name:"username",onChange:p,value:a.username})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{children:"Senha"}),Object(x.jsx)(f.a,{type:"password",id:"password",name:"password",onChange:p,value:a.password})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(g.a,{type:"submit",children:"Login"}),u?Object(x.jsx)("span",{children:" Deu erro! "}):Object(x.jsx)(x.Fragment,{})]})},D=n(101),C=n(102),F=n(54),I=n.n(F),L=n(53),w=n.n(L),T=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(4),margin:e.spacing(4),textAlign:"center",color:e.palette.text.primary}}})),k=function(e){var t=e.body,n=e.productIndex,s=T(),a=Object(c.useState)(Object(O.c)((function(e){return e.myFavs!==[]&&e.myFavs[n]}))),o=Object(h.a)(a,2),r=o[0],i=o[1],j=Object(O.c)((function(e){return e.isLogged})),u=Object(O.c)((function(e){return e.myFavs})),d=Object(O.c)((function(e){return e.userId}));function l(){for(var e=0;e<=n;e++)e===n?u[n]=!u[n]:void 0===u[e]&&(u[e]=!1);return fetch("http://localhost:8080/favme",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({myFavs:u,userId:d})}).then(i(!r))}return Object(c.useEffect)((function(){i(!!u[n]&&u[n])}),[u]),Object(x.jsx)("div",{className:s.root,children:t.map((function(e){var t=e.productId,n=e.nome,c=e.preco,a=e.descricao;return Object(x.jsx)(D.a,{item:!0,xs:12,children:Object(x.jsxs)(C.a,{className:s.paper,children:[Object(x.jsx)("h1",{children:n}),j?Object(x.jsx)(g.a,{onClick:l,children:r?Object(x.jsx)(w.a,{}):Object(x.jsx)(I.a,{})}):Object(x.jsx)(x.Fragment,{}),Object(x.jsxs)("p",{children:["R$ ",c]}),Object(x.jsx)("p",{children:a})]})},t)}))})},E=n(58),P={isLogged:!1,userId:null,myFavs:[]};var _=Object(E.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{isLogged:!0,myFavs:t.data.myFavs,userId:t.data.userId});default:return e}})),N=n(103),R=n(105),J=n(104),M=n(55),U=n.n(M),A=(n(75),function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={isLoading:!0,isDialogOpen:!1,produtos:[],error:null,isLogged:!1},c.closeDialog=c.closeDialog.bind(Object(u.a)(c)),c}return Object(j.a)(n,[{key:"showMyPort",value:function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FRONT_PORT)}},{key:"fetchProds",value:function(){var e=this;fetch("http://localhost:8080/todos").then((function(e){return e.json()})).then((function(t){return e.setState(Object(r.a)(Object(r.a)({},e.state),{},{produtos:t,isLoading:!1}))})).catch((function(t){return e.setState({error:t,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.showMyPort(),this.fetchProds()}},{key:"showDialog",value:function(){this.setState(Object(r.a)(Object(r.a)({},this.state),{},{isDialogOpen:!0}))}},{key:"closeDialog",value:function(){this.setState(Object(r.a)(Object(r.a)({},this.state),{},{isDialogOpen:!1}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,c=t.produtos;return Object(x.jsx)(O.a,{store:_,children:Object(x.jsxs)(N.a,{justify:"center",children:[Object(x.jsxs)(N.a,{justify:"center",children:[Object(x.jsx)("h1",{children:"Nosso Cat\xe1logo"}),Object(x.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(t){return e.showDialog()},children:" Login "})]}),Object(x.jsxs)(R.a,{open:this.state.isDialogOpen,children:[Object(x.jsx)(J.a,{onClick:this.closeDialog,children:Object(x.jsx)(U.a,{})}),Object(x.jsx)(S,{closeDialog:this.closeDialog})]}),n?Object(x.jsx)("h3",{children:"Loading..."}):Object.keys(c).map((function(e,t){return Object(x.jsx)(D.a,{container:!0,justify:"center",spacing:3,children:Object(x.jsx)(k,{productIndex:t,body:[c[e]]})})}))]})})}}]),n}(s.a.Component)),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),a(e),o(e)}))};o.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),B()}},[[77,1,2]]]);
//# sourceMappingURL=main.2b036583.chunk.js.map